
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.8">
    
    
      
        <title>SQL - Apuntes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6e60f8b8.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,700%7CFira+Code&display=fallback">
        <style>:root{--md-text-font:"Open Sans";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../css/pandas-dataframe.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="cyan">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sql" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Apuntes" class="md-header__button md-logo" aria-label="Apuntes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Apuntes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SQL
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="cyan"  aria-label="Cambiar a colores nocturnos"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Cambiar a colores nocturnos" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="purple" data-md-color-accent="purple"  aria-label="Cambiar a colores diurnos"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Cambiar a colores diurnos" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Limpiar" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Pestañas" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Índice
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../mongodb/" class="md-tabs__link md-tabs__link--active">
        Almacenamiento
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Cosas%20varias/Linux/" class="md-tabs__link">
        Cosas varias
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Estad%C3%ADstica/R/" class="md-tabs__link">
        Estadística
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Apuntes" class="md-nav__button md-logo" aria-label="Apuntes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Apuntes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Índice
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Almacenamiento
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Almacenamiento" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Almacenamiento
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mongodb/" class="md-nav__link">
        MongoDB
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mongodbatlas/" class="md-nav__link">
        MongoDB Atlas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spark-dataframes/" class="md-nav__link">
        Spark dataframes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spark/" class="md-nav__link">
        Spark
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          SQL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        SQL
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sql-vs-nosql" class="md-nav__link">
    SQL vs noSQL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#google-cloud" class="md-nav__link">
    Google Cloud
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#donde-practicar" class="md-nav__link">
    Dónde practicar
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejemplos" class="md-nav__link">
    Ejemplos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sintaxis" class="md-nav__link">
    Sintaxis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crear-tablas" class="md-nav__link">
    Crear tablas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modificar-tablas" class="md-nav__link">
    Modificar tablas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#obtener-informacion-sobre-las-tablas" class="md-nav__link">
    Obtener información sobre las tablas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tipos-de-joins" class="md-nav__link">
    Tipos de joins
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#constraints" class="md-nav__link">
    Constraints
  </a>
  
    <nav class="md-nav" aria-label="Constraints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#primary-key" class="md-nav__link">
    primary key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#foreign-key" class="md-nav__link">
    foreign key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not-null" class="md-nav__link">
    not null
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unique" class="md-nav__link">
    unique
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tipos-de-datos" class="md-nav__link">
    Tipos de datos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anadir-datos" class="md-nav__link">
    Añadir datos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modificar-datos" class="md-nav__link">
    Modificar datos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selecciones" class="md-nav__link">
    Selecciones
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combinacion-de-selecciones" class="md-nav__link">
    Combinación de selecciones
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#condicionales" class="md-nav__link">
    Condicionales
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#group-by" class="md-nav__link">
    Group by
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#joins" class="md-nav__link">
    Joins
  </a>
  
    <nav class="md-nav" aria-label="Joins">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tipos-de-joins_1" class="md-nav__link">
    Tipos de joins
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#funciones" class="md-nav__link">
    Funciones
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Cosas varias
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Cosas varias" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Cosas varias
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Cosas%20varias/Linux/" class="md-nav__link">
        Línea de comandos de Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Cosas%20varias/git/" class="md-nav__link">
        Git y GitHub
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Estadística
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Estadística" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Estadística
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Estad%C3%ADstica/R/" class="md-nav__link">
        R
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Tabla de contenidos
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sql-vs-nosql" class="md-nav__link">
    SQL vs noSQL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#google-cloud" class="md-nav__link">
    Google Cloud
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#donde-practicar" class="md-nav__link">
    Dónde practicar
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejemplos" class="md-nav__link">
    Ejemplos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sintaxis" class="md-nav__link">
    Sintaxis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crear-tablas" class="md-nav__link">
    Crear tablas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modificar-tablas" class="md-nav__link">
    Modificar tablas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#obtener-informacion-sobre-las-tablas" class="md-nav__link">
    Obtener información sobre las tablas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tipos-de-joins" class="md-nav__link">
    Tipos de joins
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#constraints" class="md-nav__link">
    Constraints
  </a>
  
    <nav class="md-nav" aria-label="Constraints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#primary-key" class="md-nav__link">
    primary key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#foreign-key" class="md-nav__link">
    foreign key
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not-null" class="md-nav__link">
    not null
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unique" class="md-nav__link">
    unique
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tipos-de-datos" class="md-nav__link">
    Tipos de datos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anadir-datos" class="md-nav__link">
    Añadir datos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modificar-datos" class="md-nav__link">
    Modificar datos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#selecciones" class="md-nav__link">
    Selecciones
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combinacion-de-selecciones" class="md-nav__link">
    Combinación de selecciones
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#condicionales" class="md-nav__link">
    Condicionales
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#group-by" class="md-nav__link">
    Group by
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#joins" class="md-nav__link">
    Joins
  </a>
  
    <nav class="md-nav" aria-label="Joins">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tipos-de-joins_1" class="md-nav__link">
    Tipos de joins
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#funciones" class="md-nav__link">
    Funciones
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="sql">SQL</h1>
<h2 id="sql-vs-nosql">SQL vs noSQL</h2>
<p>Las bases de datos se dividen en</p>
<ul>
<li>relacionales (SQL): almacenan la información en tablas relacionadas entre sí</li>
<li>no relacionales (noSQL)</li>
</ul>
<p>Todas las bases de datos relacionales se pueden manejar con el lenguaje SQL (Structured Query Language). Hay <a href="http://troels.arvin.dk/db/rdbms/#insert">diferencias en la sintaxis</a> de SQL dependiendo del modelo de base de datos que estemos usando.</p>
<h2 id="google-cloud">Google Cloud</h2>
<p>Estos apuntes son para la base de datos de Oracle, que utilizamos en 1º. En BigQuery hay varias diferencias:</p>
<ul>
<li>BigQuery usa una versión de SQL que llaman "Standard SQL". Algunos de los comandos son diferentes, como las conversiones de tipos. Se puede usar SQL normal seleccionando <code>More -&gt; Query Settings -&gt; Legacy SQL</code> en el editor de queries</li>
<li>Los tipos de variable son diferentes: <code>STRING</code>, <code>INT</code>, <code>NUMERIC</code>, <code>BOOL</code>, <code>DATE</code> / <code>DATETIME</code>, y <a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types">otros</a></li>
</ul>
<h2 id="donde-practicar">Dónde practicar</h2>
<ul>
<li><a href="https://livesql.oracle.com">LiveSQL</a> - entorno interactivo de Oracle, con tutoriales</li>
<li>para ver el estado actual de la base de datos, pulsar el botón <code>Find</code></li>
<li><a href="http://sqlfiddle.com/#!4">SQLFiddle</a> - otro entorno interactivo, va más fluido que el de Oracle. Utilizar el panel de la izquierda para crear las tablas e insertar datos, el de la derecha es sólo para queries</li>
<li><a href="https://www.oracle.com/database/technologies/databaseappdev-vm.html#license-lightbox">Imagen de VirtualBox</a> - como LA MÁQUINA de Susy pero cien veces más rápida</li>
<li>Instalación local: <a href="https://www.oracle.com/es/database/technologies/xe-downloads.html">base de datos</a> y <a href="https://www.oracle.com/tools/downloads/sqldev-downloads.html">SQL developer</a></li>
<li>en SQL Developer se puede ver el estado actual de todas las tablas en el panel Conexiones, a la izquierda de la pantalla. Si no aparece, ir al menú Ventana -&gt; Restaurar configuración de fábrica.</li>
</ul>
<p>SQL Developer y LiveSQL ejecutan sólo el código seleccionado. Si no hay nada seleccionado, ejecutan el script entero.</p>
<h2 id="ejemplos">Ejemplos</h2>
<ul>
<li><strong>Tabla de ejemplo</strong>: http://sqlfiddle.com/#!4/5497c. Los ejemplos en este documento se pueden ejecutar sobre esta tabla.</li>
<li><strong>Ejercicio de médicos y pacientes de Susy</strong>: http://sqlfiddle.com/#!4/4e935d3</li>
<li><strong>SQLZoo</strong>: https://sqlzoo.net/. Ejercicios para practicar queries</li>
</ul>
<h2 id="sintaxis">Sintaxis</h2>
<ul>
<li>Los identificadores (nombres de tablas, columnas, etc.) deben empezar con una letra y pueden contener letras, números y barras bajas, pero no espacios ni puntos. </li>
<li>Los identificadores no distinguen entre mayúsculas y minúsculas, pero internamente están siempre en mayúsculas; esto es importante a la hora de usar <code>SELECT</code>. Los valores contenidos en las tablas sí distinguen entre mayúsculas y minúsculas. </li>
<li>La convención que usa casi todo el mundo es escribir los comandos en mayúsculas y todo lo demás en minúsculas. La que usa Susy es poner los nombres de tabla en mayúsculas y lo demás en minúsculas.</li>
<li>Poner un punto y coma después de cada frase.</li>
<li>Al insertar VARCHAR2 y DATE <strong>usar comillas simples</strong> (<code>'</code>), no dobles.</li>
<li>Comentarios: <code>--</code> (una línea) y <code>/* */</code> (varias líneas). Si un comentario es lo último que hay en un archivo, Oracle va a darnos un error.</li>
</ul>
<h2 id="crear-tablas">Crear tablas</h2>
<p>Usar <code>CREATE TABLE</code>. </p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">empresas</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">nombre</span><span class="w"> </span><span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"></span>
<span class="w">    </span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">dni</span><span class="w"> </span><span class="nb">NUMBER</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">nombre</span><span class="w"> </span><span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">empresa</span><span class="w"> </span><span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">empresas</span><span class="p">(</span><span class="n">nombre</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="n">sueldo</span><span class="w"> </span><span class="nb">NUMBER</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"></span>
<span class="w">    </span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>Las columnas de las tablas se escriben separadas por comas. Escribir primero el nombre, seguido del tipo y las constraints como <code>NOT NULL</code>.</p>
<p>Para ver las columnas que contiene una tabla usar <code>DESCRIBE tabla</code>, y para ver todos sus elementos, <code>SELECT * FROM tabla</code>.</p>
<p>La tabla <code>user_tables</code> es una tabla interna de Oracle que contiene los nombres y datos de todas las tablas que hemos definido. Para ver una lista de todas nuestras tablas, usar <code>SELECT table_name FROM user_tables</code>.</p>
<p>Una tabla se puede eliminar con <code>DROP TABLE tabla</code>. Si la tabla contiene constraints, hay que usar <code>DROP TABLE tabla CASCADE CONSTRAINTS</code>. Las tablas sólo se pueden eliminar una a una; para borrar todas nuestras tablas a la vez seguir estos pasos:</p>
<ul>
<li>Ejecutar el comando <code>SELECT 'DROP TABLE "' || TABLE_NAME || '" CASCADE CONSTRAINTS;' FROM user_tables;</code></li>
<li>Esta query nos da como resultado una serie de comandos, cada uno de los cuales elimina una tabla. Copiar y pegar todos estos comandos y ejecutarlos para eliminar todas las tablas</li>
</ul>
<h2 id="modificar-tablas">Modificar tablas</h2>
<p>Para añadir, modificar o eliminar columnas o constraints, usar <code>ALTER TABLE</code> con <code>ADD</code>, <code>MODIFY</code>, <code>DROP</code> o <code>RENAME</code>. </p>
<p>Algunos de estos comandos no funcionarán si la tabla que queremos modificar ya contiene datos. Por ejemplo, sólo podríamos añadir columnas que fueran <code>null</code>.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="c1">-- Añadir columna</span>
<span class="w">    </span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="n">empleo</span><span class="w"> </span><span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">-- Modificar tipo de datos</span>
<span class="w">    </span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">MODIFY</span><span class="w"> </span><span class="n">dni</span><span class="w"> </span><span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">9</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="c1">-- Eliminar columna</span>
<span class="w">    </span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">DROP</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">nombre</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">-- Eliminar constraint (sólo si la declaramos fuera de línea con un nombre)</span>
<span class="w">    </span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">ejemplo</span><span class="w"> </span><span class="k">DROP</span><span class="w"> </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">const_name</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">-- Renombrar</span>
<span class="w">    </span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">RENAME</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">sueldo</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">salario</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h2 id="obtener-informacion-sobre-las-tablas">Obtener información sobre las tablas</h2>
<p>Lista de todas las tablas: <code>SELECT table_name FROM user_tables;</code></p>
<p>Todas las propiedades de todas las tablas: <code>SELECT * FROM user_tables;</code></p>
<h2 id="tipos-de-joins">Tipos de joins</h2>
<p>Hay cuatro tipos de joins:</p>
<ul>
<li><code>INNER JOIN</code>: muestra sólo los elementos en los que la condición de unión se cumple.</li>
<li><code>FULL JOIN</code>: muestra todas las columnas de todas las tablas, aunque la condición de unión no se cumpla.</li>
<li><code>LEFT JOIN</code>: muestra todas las columnas de la tabla izquierda, y sólo las de la tabla derecha que cumplen la condición de unión.</li>
<li><code>RIGHT JOIN</code>: muestra todas las columnas de la tabla derecha, y sólo las de la tabla izquierda que cumplen la condición de unión.</li>
</ul>
<p>El join por defecto es <code>INNER JOIN</code>. En los otros tres tipos (outer joins), cuando la condición no se cumple para una fila, esa fila se completa con <code>null</code>.</p>
<h2 id="constraints">Constraints</h2>
<p>Las constraints imponen condiciones a los valores que puede contener una columna. Se pueden declarar en línea o fuera de línea:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="c1">-- Constraint en línea</span>
<span class="w">    </span><span class="n">dni</span><span class="w"> </span><span class="nb">NUMBER</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"></span>

<span class="w">    </span><span class="c1">-- Constraint fuera de línea (abreviada)</span>
<span class="w">    </span><span class="n">dni</span><span class="w"> </span><span class="nb">NUMBER</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">dni</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="c1">-- Constraint fuera de línea (con nombre)</span>
<span class="w">    </span><span class="n">dni</span><span class="w"> </span><span class="nb">NUMBER</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="w"></span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">pk_dni</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">dni</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Las constraints fuera de línea pueden tener nombre. Estos nombres nos permiten seleccionar la constraint si queremos modificarla o eliminarla posteriormente. No puede haber dos constraints con el mismo nombre.</p>
<p>Las constraints sólo se pueden usar dentro de un <code>CREATE TABLE</code>, <code>ALTER TABLE</code>, <code>CREATE VIEW</code> O <code>ALTER VIEW</code>.</p>
<p>Hay seis tipos, sólo desarrollo los que hemos visto en clase:</p>
<h4 id="primary-key">primary key</h4>
<p>Marca la columna como clave primaria.</p>
<p>La clave primaria debe ser única, pero se puede crear una PK múltiple con <code>PRIMARY KEY (columna1, columna2)</code>. Esto sólo funciona con notación fuera de línea.</p>
<h4 id="foreign-key">foreign key</h4>
<p>Indica que la columna proviene de otra tabla. La tabla de origen se indica con <code>REFERENCES</code>:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="c1">-- Podemos omitir el tipo de dato, porque Oracle lo copiará de la tabla origen</span>
<span class="w">    </span><span class="n">cod_empresa</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">empresas</span><span class="w"> </span><span class="p">(</span><span class="n">cod_empresa</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="c1">-- Si la columna tiene el mismo nombre en ambas tablas, no es necesario indicarlo.</span>
<span class="w">    </span><span class="n">cod_empresa</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">empresas</span><span class="w"></span>

<span class="w">    </span><span class="c1">-- Si queremos hacerlo fuera de línea:</span>
<span class="w">    </span><span class="n">COD_EMPRESA</span><span class="w"> </span><span class="nb">number</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="k">CONSTRAINT</span><span class="w"> </span><span class="n">fk_tabla1_cod_empresa</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">cod_empresa</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">empresas</span><span class="w"></span>
<span class="w">    </span><span class="c1">-- Tener en cuenta que</span>
<span class="w">    </span><span class="c1">-- 1. hay que declarar la clave antes de aplicar la constraint</span>
<span class="w">    </span><span class="c1">-- 2. el código de constraint debe ser siempre único, por eso añadimos el nombre de la tabla actual</span>
<span class="w">    </span><span class="c1">-- 3. al igual que en el caso anterior, el nombre de columna se puede omitir, pero sólo si es el mismo nombre en ambas tablas</span>
</code></pre></div>
<p>Las FK pueden ser null. Más información sobre interacciones entre FK y otras constraints: https://docs.oracle.com/cd/B28359_01/appdev.111/b28424/adfns_constraints.htm#sthref549</p>
<h4 id="not-null">not null</h4>
<p>Indica que el valor de la columna es obligatorio y no se puede dejar en blanco. Esta constraint siempre se tiene que declarar con notación en línea.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">nombre</span><span class="w"> </span><span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"></span>
</code></pre></div>
<p>Todas las PK son también not null, y no hay que indicarlo manualmente.</p>
<h4 id="unique">unique</h4>
<p>Indica que la columna no puede contener valores repetidos. Todas las primary key son unique, y no es necesario indicarlo.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">correo_electronico</span><span class="w"> </span><span class="n">VARCHAR2</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="k">UNIQUE</span><span class="w"></span>
</code></pre></div>
<h2 id="tipos-de-datos">Tipos de datos</h2>
<p>Los tipos de datos son diferentes en cada modelo de base de datos. Los que vamos a utilizar son:</p>
<ul>
<li><code>VARCHAR2(n)</code>: texto con un tamaño máximo de n bytes (n letras, excepto si utilizamos caracteres especiales). Utilizarlo siempre en vez de <code>CHAR</code> o <code>VARCHAR</code>. El valor máximo de n es 4000, para datos más grandes usar <a href="https://docs.oracle.com/cd/B28359_01/server.111/b28318/datatype.htm#CNCPT513">tipos LOB</a>.</li>
<li><code>NUMBER(n, m)</code>: almacena números. n es el total de cifras (incluyendo decimales), y m el número de decimales.</li>
<li><code>DATE</code>: almacena fecha y hora. Para introducirlas usar el formato <code>TO_DATE('24-01-1548', 'DD-MM-YYYY</code>. <a href="https://docs.oracle.com/cd/B19306_01/server.102/b14200/functions183.htm">Manual de la función TO_DATE</a>.</li>
<li><a href="https://docs.oracle.com/cd/B28359_01/server.111/b28318/datatype.htm#i2093">Lista completa de tipos</a></li>
</ul>
<h2 id="anadir-datos">Añadir datos</h2>
<p>Usar <code>INSERT INTO tabla (columna1, columna2, ...) VALUES (valor1, valor2, ...);</code>.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="p">(</span><span class="n">dni</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">empresa</span><span class="p">,</span><span class="w"> </span><span class="n">sueldo</span><span class="p">)</span><span class="w"> </span>
<span class="w">        </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">53845739</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Pablo&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Google&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">5000</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>La lista de columnas se puede omitir si damos los valores en el mismo orden en que declaramos las columnas al crear la tabla.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">3823734</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Marcos&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Amazon&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">5500</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>Se puede insertar varios valores a la vez con <code>INSERT ALL</code>. No ahorra nada de tiempo al escribirlo, pero es más eficiente que enviar los comandos uno a uno. Al final de un <code>INSERT ALL</code> es obligatorio incluir un <code>SELECT</code>; la opción más común es usar <code>SELECT * FROM dual</code>, que no hace nada. Los valores que se insertan van todos seguidos, sin coma o punto y coma.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">INSERT</span><span class="w"> </span><span class="k">ALL</span><span class="w"></span>
<span class="w">        </span><span class="k">INTO</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="p">(</span><span class="n">dni</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">empresa</span><span class="p">,</span><span class="w"> </span><span class="n">sueldo</span><span class="p">)</span><span class="w"> </span>
<span class="w">            </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">53845739</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Pablo&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Google&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">5000</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="k">INTO</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="mi">3823734</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Marcos&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Amazon&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">5500</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">DUAL</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h2 id="modificar-datos">Modificar datos</h2>
<p><code>UPDATE</code> permite cambiar datos ya introducidos en la tabla, y <code>DELETE</code> se usa para eliminarlos. Por defecto se aplican a todas las filas de la tabla; también se pueden combinar con <code>WHERE</code> si sólo queremos que afecten a algunas filas.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">UPDATE</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">SET</span><span class="w"> </span><span class="n">sueldo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sueldo</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">empresa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Google&#39;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h2 id="selecciones">Selecciones</h2>
<p>El comando <code>SELECT ... FROM ...</code> nos permite seleccionar los elementos que cumplan una condición dada. </p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleados</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Se pueden pasar varias cláusulas adicionales, <strong>en este orden</strong>: <code>SELECT DISTINCT ... FROM ... JOIN ... WHERE ... GROUP BY ... ORDER BY ...</code>. La cláusula FROM es obligatoria, todas las demás son opcionales.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">empresa</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleados</span><span class="w"></span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">sueldo</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2000</span><span class="w"> </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">empresa</span><span class="p">,</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">nombre</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<ul>
<li><code>DISTINCT</code>: no muestra los resultados repetidos.</li>
<li><code>JOIN</code>: se utiliza para enlazar datos que están en tablas distintas pero comparten algún campo. <a href="#joins">Ver abajo</a></li>
<li><code>WHERE</code>: muestra sólo los resultados que cumplen una condición. <a href="#condicionales">Ver abajo</a></li>
<li><code>GROUP BY</code>: muestra los resultados agrupados según los valores únicos de una de las columnas.</li>
<li><code>ORDER BY</code>: muestra los resultados ordenados según los valores de una o varias columnas. </li>
</ul>
<p>Se le pueden pasar dos parámetros adicionales: 
  * <code>ASC</code> ó <code>DESC</code> (orden ascendiente o descendiente, por defecto <code>ASC</code>)
  * <code>NULLS FIRST</code> ó <code>NULLS LAST</code> (por defecto <code>NULLS LAST</code>)</p>
<p>Lista de todas las tablas: <code>SELECT table_name FROM user_tables;</code></p>
<p>El comando <code>SELECT</code> se puede anidar.</p>
<h2 id="combinacion-de-selecciones">Combinación de selecciones</h2>
<p>En SQL podemos combinar los resultados de varias selecciones. Para que se puedan aplicar estas operaciones, los resultados deben tener el mismo número de columnas, y estas columnas deben tener tipos compatibles.</p>
<ul>
<li><code>selección1 UNION selección2</code> devuelve la unión de las selecciones: todos los elementos que están al menos en una de ellas. Si hay filas que están en ambas selecciones sólo devuelve una; si queremos que muestre las dos hay que usar <code>UNION ALL</code>.</li>
<li><code>selección1 INTERSECT selección2</code> devuelve la intersección de las selecciones: los elementos que están en ambas.</li>
<li><code>selección1 MINUS selección2</code> devuelve los elementos que están en la primera selección pero no en la segunda.</li>
</ul>
<h2 id="condicionales">Condicionales</h2>
<p>Los condicionales en SQL se representan con la cláusula <code>WHERE</code>. Se puede utilizar dentro de un comando <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code> o <code>DELETE</code>.</p>
<p>La sintaxis del comando es <code>WHERE condición</code>, donde la condición puede tomar una de estas formas: <code>sueldo = 1000</code>, <code>sueldo &lt;= 1000</code> (ó <code>&gt;=</code>) y <code>sueldo BETWEEN 2000 AND 2500</code>.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">sueldo</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">sueldo</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">5000</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Podemos combinar varias condiciones usando <code>AND</code>, <code>OR</code> y <code>NOT</code>. Si tenemos más de dos condiciones es aconsejable usar paréntesis para dejar claro en qué orden queremos que se combinen.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">sueldo</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="p">(</span><span class="n">sueldo</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">3000</span><span class="p">)</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="p">(</span><span class="k">NOT</span><span class="w"> </span><span class="n">empresa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Google&#39;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<h2 id="group-by">Group by</h2>
<p>El comando <code>GROUP BY columna</code> agrupa en una sola fila todos los elementos que comparten el mismo valor de la columna.</p>
<p>Como este comando va a agrupar varias filas en una, tenemos que utilizar alguna función de agregación, como <code>SUM</code>, en los datos que queramos mostrar. Ver http://sqlfiddle.com/#!4/9b7433/4</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="c1">-- Este comando va a darnos error, porque GROUP BY muestra una fila por empresa,</span>
<span class="w">    </span><span class="c1">-- y al haber varios empleados por cada empresa no sabría qué nombre mostrar</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="n">nombre</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">empresa</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">-- Hay que usar una función de agregación:</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">sueldo</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">empresa</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">-- Podemos mostrar la columna del GROUP BY en el resultado del SELECT:</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">sueldo</span><span class="p">),</span><span class="w"> </span><span class="n">empresa</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">empresa</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h2 id="joins">Joins</h2>
<p>La cláusula <code>JOIN</code> se utiliza para enlazar datos que están distribuidos entre dos o más tablas pero comparten algún campo. Por ejemplo, si tenemos una tabla para empleados y otra con datos de empresas, podríamos hacer un join para obtener en una sola query toda la información de cada empleado y de la empresa en la que trabaja.</p>
<p>Ver la tabla de ejemplo para joins: http://sqlfiddle.com/#!4/4f1f5a/1.</p>
<p>La sintaxis del comando es <code>SELECT columnas FROM tabla1 JOIN tabla2 ON columnasIguales</code>. <code>columnas</code> son las columnas que queremos que aparezcan en el resultado, y <code>columnasIguales</code> son las columnas cuyos contenidos deben coincidir.</p>
<p><div class="highlight"><pre><span></span><code><span class="w">    </span><span class="c1">-- Este comando muestra en una sola fila la información de cada empleado </span>
<span class="w">    </span><span class="c1">-- y toda la información del departamento al que pertenece</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamentos</span><span class="w"> </span><span class="k">ON</span><span class="w"></span>
<span class="w">    </span><span class="n">empleados</span><span class="p">.</span><span class="n">cod_dept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">departamentos</span><span class="p">.</span><span class="n">cod_dept</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">-- Idéntico al anterior, pero sólo muestra empleados en el departamento 1</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamentos</span><span class="w"> </span><span class="k">ON</span><span class="w"></span>
<span class="w">    </span><span class="n">empleados</span><span class="p">.</span><span class="n">cod_dept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">departamentos</span><span class="p">.</span><span class="n">cod_dept</span><span class="w"></span>
<span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">departamentos</span><span class="p">.</span><span class="n">cod_dept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">-- Siempre que hacemos ``SELECT *`` en un join vamos a tener columnas repetidas.</span>
<span class="w">    </span><span class="c1">-- Podemos elegir manualmente qué columnas queremos mostrar</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="n">empleados</span><span class="p">.</span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">empleados</span><span class="p">.</span><span class="n">apellidos</span><span class="p">,</span><span class="w"> </span><span class="n">departamentos</span><span class="p">.</span><span class="n">nombre</span><span class="w"></span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamentos</span><span class="w"> </span><span class="k">ON</span><span class="w"></span>
<span class="w">    </span><span class="n">empleados</span><span class="p">.</span><span class="n">cod_dept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">departamentos</span><span class="p">.</span><span class="n">cod_dept</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">-- Podemos hacer varios joins en una sola consulta</span>
<span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">e_bonos</span><span class="w"> </span><span class="k">ON</span><span class="w"></span>
<span class="w">    </span><span class="n">empleados</span><span class="p">.</span><span class="n">dni</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e_bonos</span><span class="p">.</span><span class="n">dni</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">bonos</span><span class="w"> </span><span class="k">ON</span><span class="w"></span>
<span class="w">    </span><span class="n">e_bonos</span><span class="p">.</span><span class="n">cod_bono</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bonos</span><span class="p">.</span><span class="n">cod_bono</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
Cualquier join se puede declarar de forma equivalente con un simple <code>WHERE</code>. En general es preferible utilizar joins, porque son más legibles y más fáciles de optimizar.</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">suppliers</span><span class="p">.</span><span class="n">supplier_id</span><span class="p">,</span><span class="w"> </span><span class="n">suppliers</span><span class="p">.</span><span class="n">supplier_name</span><span class="p">,</span><span class="w"> </span><span class="n">orders</span><span class="p">.</span><span class="n">order_date</span><span class="w"></span>
<span class="k">FROM</span><span class="w"> </span><span class="n">suppliers</span><span class="p">,</span><span class="w"> </span><span class="n">orders</span><span class="w"></span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">suppliers</span><span class="p">.</span><span class="n">supplier_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">orders</span><span class="p">.</span><span class="n">supplier_id</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- es equivalente a:</span>

<span class="k">SELECT</span><span class="w"> </span><span class="n">suppliers</span><span class="p">.</span><span class="n">supplier_id</span><span class="p">,</span><span class="w"> </span><span class="n">suppliers</span><span class="p">.</span><span class="n">supplier_name</span><span class="p">,</span><span class="w"> </span><span class="n">orders</span><span class="p">.</span><span class="n">order_date</span><span class="w"></span>
<span class="k">FROM</span><span class="w"> </span><span class="n">suppliers</span><span class="w"></span>
<span class="k">JOIN</span><span class="w"> </span><span class="n">orders</span><span class="w"></span>
<span class="k">ON</span><span class="w"> </span><span class="n">suppliers</span><span class="p">.</span><span class="n">supplier_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">orders</span><span class="p">.</span><span class="n">supplier_id</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<h5 id="tipos-de-joins_1">Tipos de joins</h5>
<p>Hay cuatro tipos de joins:</p>
<ul>
<li><code>INNER JOIN</code>: muestra sólo los elementos en los que la condición de unión se cumple.</li>
<li><code>FULL JOIN</code>: muestra todas las columnas de todas las tablas, aunque la condición de unión no se cumpla.</li>
<li><code>LEFT JOIN</code>: muestra todas las columnas de la tabla izquierda, y sólo las de la tabla derecha que cumplen la condición de unión.</li>
<li><code>RIGHT JOIN</code>: muestra todas las columnas de la tabla derecha, y sólo las de la tabla izquierda que cumplen la condición de unión.</li>
</ul>
<p>El join por defecto es <code>INNER JOIN</code>. En los otros tres tipos (outer joins), cuando la condición no se cumple para una fila, esa fila se completa con <code>null</code>.</p>
<h2 id="funciones">Funciones</h2>
<p>Por ahora sólo hemos visto <strong>funciones de agregación</strong>, que toman como argumento un conjunto de filas y devuelven un solo valor. Estas funciones se utilizan dentro de un <code>SELECT</code>, y se pueden combinar con todas las cláusulas de un <code>SELECT</code>, como <code>WHERE</code>, <code>GROUP BY</code>, etc.</p>
<ul>
<li><code>SUM()</code>: calcula la suma de los valores, que deben ser números</li>
<li><code>MAX()</code>, <code>MIN()</code>: devuelve el máximo o mínimo de los valores</li>
<li><code>AVG()</code>: calcula la media de los valores</li>
<li>
<p><code>COUNT()</code>: devuelve el número de filas en una tabla. <code>COUNT(*)</code> devuelve el número total de filas, <code>COUNT(ALL columna)</code> devuelve todas las filas excepto si su valor en <code>columna</code> es <code>null</code>, y <code>COUNT(DISTINCT columna)</code> devuelve el número de valores únicos en <code>columna</code>, ignorando también los <code>null</code></p>
<p>-- Obtiene la suma de los sueldos de los empleados de Amazon
SELECT SUM(sueldo) FROM empleados WHERE empresa = 'Amazon';</p>
<p>-- Cuenta el número total de empleados
SELECT COUNT(*) FROM empleados;</p>
<p>-- Cuenta el número de empresas que pagan más de 5000 euros a algún empleado
SELECT COUNT(DISTINCT empresa) FROM empleados WHERE sueldo &gt;= 5000;</p>
</li>
</ul>
<p>Tener en cuenta que no podemos hacer una query que contenga, por ejemplo, <code>nombre</code> y <code>sum(sueldo)</code>, porque el número de resultados sería diferente (<code>sum</code> devuelve un solo resultado, y <code>nombre</code> devuelve uno por fila). Una forma de solucionar esto es utilizar <code>GROUP BY</code>, ya que <code>GROUP BY</code> fuerza a la query a devolver un número fijo de resultados (uno por grupo).</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="n">departamentos</span><span class="p">.</span><span class="n">descripcion</span><span class="p">,</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">empleados</span><span class="p">.</span><span class="n">sueldo</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">departamentos</span><span class="p">,</span><span class="w"> </span><span class="n">empleados</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">departamentos</span><span class="p">.</span><span class="n">cod_dept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">empleados</span><span class="p">.</span><span class="n">cod_dept</span><span class="w"></span>
<span class="w">    </span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">departamentos</span><span class="p">.</span><span class="n">descripcion</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Hay también <a href="https://docs.oracle.com/cd/B19306_01/server.102/b14200/functions001.htm">otros tipos de funciones</a>. Además, las bases de datos de Oracle incluyen un lenguaje de programación propio para complementar a SQL, llamado PL.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Pie">
      
        
        <a href="../spark/" class="md-footer__link md-footer__link--prev" aria-label="Anterior: Spark" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Anterior
              </span>
              Spark
            </div>
          </div>
        </a>
      
      
        
        <a href="../../Cosas%20varias/Linux/" class="md-footer__link md-footer__link--next" aria-label="Siguiente: Línea de comandos de Linux" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Siguiente
              </span>
              Línea de comandos de Linux
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.tabs", "navigation.instant"], "translations": {"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.term.missing": "Falta", "select.version.title": "Seleccionar versi\u00f3n"}, "search": "../../assets/javascripts/workers/search.22074ed6.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.960e086b.min.js"></script>
      
    
  </body>
</html>